# web_scrapper

Технические требования для WEB_SCRAPPER:

1. Машина с операционной системой UBUNTU с версией не ниже 18.04
2. Права SUDO
3. Установленный DOCKER и DOCKER-COMPOUSE https://docs.docker.com/compose/install/
А так же зависимые библиотеки для него.
4. Подключенный INTERNET

Инструкция по установке.
1. Клонировать репозиторий в удобную для вас папку
# git clone git@github.com:lirikp/web_scrapper.git

2. Зайти в каталог репозитория cd web_scrapper
3. Запустить сборку и создание машины коммандой:
# sudo docker-compose up --build -d
4. После отработки комманды, (около 1-2мин на 1 процессорной машине и 8GB) проверить запущена ли она коммандой:
# sudo docker ps
5. Если в списке присутствует одна запись запущенной машины с названием scrapper, запустить консоль на этот полученный хост
6. Ручной запуск загрузчика новостей или установка работы по CRONTAB
6.1 В ручную загрузчик новостей можно запустить коммандой
# /usr/bin/python3 /home/scrapper/main.py
По окончании работы скрипта появится сообщение о количестве отгруженных сообщений в базу
6.2 Для установки работы по CRONTAB в консоли хоста наберите комманду > crontab -e
откроется редактор VIM, далее поместите строку указанную ниже в конец файла.
*/5 * * * *     d=`date`; echo $d >> /tmp/scrapper.log; /usr/bin/python3 /home/scrapper/main.py >> /tmp/scrapper.log

6.2.1 Перезапустите CRON коммандой из консоли # service restart cron
6.2.2 После успешного перезапуска наберите комманду # cat /tmp/scrapper.log. Если в логе появляются свежие записи, загрузка заработала успешно.
